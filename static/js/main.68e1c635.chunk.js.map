{"version":3,"sources":["components/Header.js","auth/index.js","components/UserTodos.js","components/UserPosts.js","api/index.js","index.js"],"names":["Header","currentUser","setCurrentUser","userList","useState","selectedUser","setSelectedUser","useEffect","className","onSubmit","event","preventDefault","to","activeClassName","onClick","localStorage","removeItem","username","onChange","id","target","value","user","find","map","setItem","JSON","stringify","UserTodos","userTodos","title","completed","style","textDecoration","UserPosts","userPosts","body","BASE","a","axios","get","data","userId","App","setUserList","parse","getItem","setUserPosts","setUserTodos","getUsers","then","users","catch","error","getPostsByUser","posts","getTodosByUser","todos","path","exact","padding","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.68e1c635.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// NEW\r\nimport {\r\n  storeCurrentUser,\r\n  clearCurrentUser\r\n} from '../auth';\r\n\r\nimport './Header.css';\r\n\r\nconst Header = ({\r\n  currentUser,\r\n  setCurrentUser,\r\n  userList \r\n}) => {\r\n  const [selectedUser, setSelectedUser] = useState();\r\n\r\n  useEffect(() => {\r\n    setSelectedUser(userList[0]);\r\n  }, [ userList ]);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n  }\r\n\r\n  const handleSelectChange = (event) => {\r\n    const id = event.target.value;\r\n    const user = userList.find(user => user.id == id);\r\n    setSelectedUser(user);\r\n  }\r\n\r\n  const handleUserLogin = (event) => {\r\n    storeCurrentUser(selectedUser); // NEW\r\n    setCurrentUser(selectedUser);\r\n  }\r\n\r\n  const handleUserLogout = (event) => {\r\n    setSelectedUser(userList[0]);\r\n    clearCurrentUser(); // NEW\r\n    setCurrentUser(null);\r\n  }\r\n\r\n  return (\r\n    <header>\r\n      <h1>Welcome to UserHub</h1>\r\n      <form \r\n        className=\"user-select\" \r\n        onSubmit={ handleSubmit } >\r\n        {\r\n          currentUser\r\n          ? <> \r\n              <NavLink to=\"/posts\" activeClassName=\"current\">POSTS</NavLink>\r\n              <NavLink to=\"/todos\" activeClassName=\"current\">TODOS</NavLink >\r\n              <button onClick={ handleUserLogout }>LOG OUT, { currentUser.username }</button>\r\n            </>\r\n          : <>\r\n              <select onChange={ handleSelectChange }>{\r\n                userList.map(user => (\r\n                  <option key={ user.id } value={ user.id }>\r\n                    { user.username }\r\n                  </option>\r\n                ))\r\n              }</select>\r\n              <button onClick={ handleUserLogin }>LOG IN</button>\r\n            </>\r\n        }\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","export function storeCurrentUser(user) {\r\n    localStorage.setItem('currentUser', JSON.stringify(user));\r\n  }\r\n  \r\n  export function getCurrentUser() {\r\n    const user = JSON.parse(localStorage.getItem('currentUser'));\r\n    return user;\r\n  }\r\n  \r\n  export function clearCurrentUser() {\r\n    localStorage.removeItem('currentUser');\r\n  }","import React from 'react';\r\n\r\nimport './UserTodos.css';\r\n\r\nconst UserTodos = ({\r\n  currentUser,\r\n  userTodos\r\n}) => {\r\n  return (\r\n    <div className=\"user-todos\">\r\n      <h2>Todos By { currentUser.username }</h2>\r\n      {userTodos.map(({ id, title, completed }) => (\r\n        <div key={ id } className=\"todo\">\r\n          <h3 style={{\r\n            textDecoration: completed ? 'line-through' : 'none'\r\n          }}>{ title }</h3>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserTodos;","import React from 'react';\r\n\r\nimport './UserPosts.css';\r\n\r\nconst UserPosts = ({\r\n  currentUser,\r\n  userPosts\r\n}) => {\r\n  return (\r\n    <div className=\"user-posts\">\r\n      <h2>Posts By { currentUser.username }</h2>\r\n      {userPosts.map(({ id, title, body}) => (\r\n        <div key={ id } className=\"post\">\r\n          <h3>{ title }</h3>\r\n          <p>{ body }</p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserPosts;","import axios from 'axios';\r\n\r\nconst BASE = 'https://jsonplace-univclone.herokuapp.com'\r\n\r\nexport async function getUsers() {\r\n  try {\r\n    const { data } = await axios.get(`${ BASE }/users`);\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\nexport async function getPostsByUser(userId) {\r\n  try {\r\n    const { data } = await axios.get(`${ BASE }/users/${ userId }/posts`);\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function getTodosByUser(userId) {\r\n  try {\r\n    const { data } = await axios.get(`${ BASE }/users/${ userId }/todos`);\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Switch,\r\n  Redirect\r\n} from 'react-router-dom';\r\n\r\nimport {\r\n  Header,\r\n  UserPosts,\r\n  UserTodos\r\n} from './components';\r\n\r\nimport {\r\n  getUsers,\r\n  getPostsByUser,\r\n  getTodosByUser\r\n} from './api';\r\n\r\n// NEW\r\nimport {\r\n  getCurrentUser\r\n} from './auth';\r\n\r\nconst App = () => {\r\n  const [userList, setUserList] = useState([]);\r\n\r\n  // MODIFIED\r\n  const [currentUser, setCurrentUser] = useState(getCurrentUser());\r\n\r\n  const [userPosts, setUserPosts] = useState([]);\r\n  const [userTodos, setUserTodos] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getUsers()\r\n      .then(users => {\r\n        setUserList(users)\r\n      })\r\n      .catch(error => {\r\n        // something something errors\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!currentUser) {\r\n      setUserPosts([]);\r\n      setUserTodos([]);\r\n      return;\r\n    }\r\n\r\n    getPostsByUser(currentUser.id)\r\n      .then(posts => {\r\n        setUserPosts(posts);\r\n      })\r\n      .catch(error => {\r\n        // something something errors\r\n      });\r\n\r\n    getTodosByUser(currentUser.id)\r\n      .then(todos => {\r\n        setUserTodos(todos);\r\n      })\r\n      .catch(error => {\r\n        // something something errors\r\n      });\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <Router>\r\n      <div id=\"App\">\r\n        <Header\r\n          userList={ userList }\r\n          currentUser={ currentUser }\r\n          setCurrentUser={ setCurrentUser } />\r\n        {\r\n          currentUser\r\n          ? <>\r\n              <Switch>\r\n                <Route path=\"/posts\">\r\n                  <UserPosts\r\n                    userPosts={ userPosts }\r\n                    currentUser={ currentUser } />\r\n                </Route>\r\n                <Route path=\"/todos\">\r\n                  <UserTodos\r\n                    userTodos={ userTodos }\r\n                    currentUser={ currentUser } />\r\n                </Route>\r\n                <Route exact path=\"/\">\r\n                  <h2 style={{\r\n                    padding: \".5em\"\r\n                  }}>Welcome, { currentUser.username }!</h2>\r\n                </Route>\r\n                <Redirect to=\"/\" />\r\n              </Switch>\r\n            </>\r\n          : <>\r\n              <Switch>\r\n                <Route exact path=\"/\">\r\n                  <h2 style={{\r\n                    padding: \".5em\"\r\n                  }}>Please log in, above.</h2>\r\n                </Route>\r\n                <Redirect to=\"/\" />\r\n              </Switch>\r\n            </>\r\n        }\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}